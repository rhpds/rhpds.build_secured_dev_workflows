---
- name: Get OpenShift Apps Domain
  ansible.builtin.set_fact:
    _rhpds_build_secured_dev_workflows_developer_hub_gitlab_host: "gitlab-{{
      rhpds_build_secured_dev_workflows_developer_hub_gitlab_namespace }}.{{
      openshift_cluster_ingress_domain }}"
    _rhpds_build_secured_dev_workflows_developer_hub_host: "backstage-{{
      rhpds_build_secured_dev_workflows_developer_hub_namespace }}.{{
      openshift_cluster_ingress_domain }}"
    _rhpds_build_secured_dev_workflows_developer_hub_devspaces_host: "devspaces.{{
      openshift_cluster_ingress_domain }}"
    _rhpds_build_secured_dev_workflows_developer_hub_quay_host: quay-{{ guid }}.{{
      openshift_cluster_ingress_domain }}
    _rhpds_build_secured_dev_workflows_developer_hub_argocd_host: argocd-server-{{
      rhpds_build_secured_dev_workflows_developer_hub_argocd_namespace }}.{{
      openshift_cluster_ingress_domain }}
    _rhpds_build_secured_dev_workflows_developer_hub_keycloak_host: sso.{{
      openshift_cluster_ingress_domain }}
    _rhpds_build_secured_dev_workflows_developer_hub_tpa_host: server-{{
      rhpds_build_secured_dev_workflows_developer_hub_tpa_namespace }}.{{
      openshift_cluster_ingress_domain }}

- name: Setup ACS
  ansible.builtin.include_tasks:
    file: ./setup_rhacs.yml

- name: Setup Gitlab
  ansible.builtin.include_tasks:
    file: ./setup_gitlab.yml

- name: Setup TPA
  ansible.builtin.include_tasks:
    file: ./setup_tpa.yml

- name: Setup Devspaces
  ansible.builtin.include_tasks:
    file: ./setup_devspaces.yml

- name: Setup Quay
  ansible.builtin.include_tasks:
    file: ./setup_quay.yml

- name: Setup Keycloak
  ansible.builtin.include_tasks:
    file: ./setup_keycloak.yml

- name: Setup Developer Hub
  ansible.builtin.include_tasks:
    file: ./setup_dh.yml